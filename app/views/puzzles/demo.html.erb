<%# app/views/puzzles/demo.html.erb %>
<!-- Tailwind safelist for JS-added classes (demo-only) -->
<div class="hidden border-green-500 border-red-500 border-transparent border-2"></div>

<h1 class="text-2xl font-semibold mb-4">PlumaFill â€” Demo</h1>

<div data-controller="cell">
  <div 
    class="grid gap-1"
    style="grid-template-columns: repeat(<%= @grid.first.length %>, minmax(0, 1fr));"
  >
    <% @grid.each_with_index do |row, row_index| %>
      <% row.each_with_index do |cell, col_index| %>
        <% if cell.nil? %>
          <div class="w-12 h-12 border border-black bg-black"></div>
        <% else %>
          <input
            type="text"
            maxlength="1"
            class="w-12 h-12 border border-black text-center uppercase"
            data-row="<%= row_index %>"
            data-col="<%= col_index %>"
            data-solution="<%= cell %>"
            data-cell-target="input"
            data-action="keydown->cell#keydown input->cell#input"
          />
        <% end %>
      <% end %>
    <% end %>
  </div>

  <div class="mt-4 flex items-center gap-3">
    <button
      type="button"
      class="rounded bg-slate-800 px-4 py-2 text-white hover:bg-slate-700"
      data-action="click->cell#check"
    >
      Check
    </button>
    <button
      type="button"
      class="rounded border border-slate-400 px-4 py-2 text-slate-700 hover:bg-slate-100"
      data-action="click->cell#clear"      
    >
      Clear
    </button>

    <p class="text-sm text-slate-700" data-cell-target="feedback"></p>
  </div>
</div>